services:
  - type: web
    name: polyprophet
    runtime: node
    plan: starter
    region: frankfurt
    # ğŸ† v72 GOLDEN PRESET - 30% stake, $2.50 floor, max profit with â‰¤50% drawdown
    buildCommand: npm ci
    startCommand: node server.js
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      # ğŸ† v70: TRADE_MODE - Set via Render dashboard for LIVE trading
      # Keep PAPER here for safety - override in dashboard for LIVE
      # NOTE: LIVE mode REQUIRES REDIS_URL to be set!
      - key: TRADE_MODE
        value: PAPER
      # ğŸ† v70: Proven optimal starting balance (Â£5)
      - key: PAPER_BALANCE
        value: "5.00"
      # ğŸ† v72 GOLDEN PRESET: 30% stake = optimal for $5â†’$100+ with â‰¤50% max drawdown
      # Combined with $2.50 balance floor, this enforces hard -50% drawdown stop
      - key: MAX_POSITION_SIZE
        value: "0.30"
      # ğŸ† v61: Liquidity cap - prevents unrealistic backtest sizes
      - key: MAX_ABSOLUTE_POSITION_SIZE
        value: "100"
      # Auth - CHANGE THESE in Render dashboard!
      - key: AUTH_USERNAME
        value: bandito
      - key: AUTH_PASSWORD
        value: bandito
      # ğŸ† v70: REQUIRED FOR LIVE MODE - Set in Render dashboard
      # Without Redis, LIVE mode will be downgraded to PAPER for safety
      # - key: REDIS_URL
      #   value: "your-redis-url-here"
      # ğŸ† v70: Optional - Set if CLOB/Gamma requests are blocked by Cloudflare
      # - key: PROXY_URL
      #   value: "your-proxy-url-here"

