services:
  - type: web
    name: polyprophet
    runtime: node
    plan: starter
    region: frankfurt
    # ğŸ† v79 FINAL (LOCKED) - Long-horizon datasets + rolling validation + all invariants verified
    buildCommand: npm ci
    startCommand: node server.js
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      # ğŸ† v70: TRADE_MODE - Set via Render dashboard for LIVE trading
      # Keep PAPER here for safety - override in dashboard for LIVE
      # NOTE: LIVE mode REQUIRES REDIS_URL to be set!
      - key: TRADE_MODE
        value: PAPER
      # ğŸ† v70: Proven optimal starting balance (Â£5)
      - key: PAPER_BALANCE
        value: "5.00"
      # ğŸ† v80 SWEET SPOT: 32% max stake cap (max profit with lower ruin risk)
      - key: MAX_POSITION_SIZE
        value: "0.32"
      # ğŸ† v107: Start unpaused by default (paper auto-trading enabled)
      - key: START_PAUSED
        value: "false"
      # ğŸ† v107: No auth for easy access (user's personal deployment)
      - key: NO_AUTH
        value: "true"
      # ğŸ† v61: Liquidity cap - prevents unrealistic backtest sizes
      - key: MAX_ABSOLUTE_POSITION_SIZE
        value: "100"
      # Auth - Set your own credentials in Render dashboard
      # These are just defaults - override in dashboard with your values
      - key: AUTH_USERNAME
        value: admin
      - key: AUTH_PASSWORD
        value: changeme
      - key: API_KEY
        value: changeme
      # ğŸ† v70: REQUIRED FOR LIVE MODE - Set in Render dashboard
      # Without Redis, LIVE mode will be downgraded to PAPER for safety
      # - key: REDIS_URL
      #   value: "your-redis-url-here"
      # ğŸ† v70: Optional - Set if CLOB/Gamma requests are blocked by Cloudflare
      # - key: PROXY_URL
      #   value: "your-proxy-url-here"

