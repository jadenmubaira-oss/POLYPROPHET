services:
  - type: web
    name: polyprophet
    runtime: node
    plan: starter
    region: frankfurt
    # ğŸ† v70 FINAL GOAT deployment - Chainlink hard-block, Redis required for LIVE, balance floor
    buildCommand: npm ci
    startCommand: node server.js
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      # ğŸ† v70: TRADE_MODE - Set via Render dashboard for LIVE trading
      # Keep PAPER here for safety - override in dashboard for LIVE
      # NOTE: LIVE mode REQUIRES REDIS_URL to be set!
      - key: TRADE_MODE
        value: PAPER
      # ğŸ† v70: Proven optimal starting balance (Â£5)
      - key: PAPER_BALANCE
        value: "5.00"
      # ğŸ† v70: PROVEN OPTIMAL stake (30% = best profit/drawdown ratio)
      # Backtest-verified: 77-81% WR, Â£381 from Â£5 in 72h
      # Override via Render dashboard if you want more aggressive (0.35) or conservative (0.25)
      - key: MAX_POSITION_SIZE
        value: "0.30"
      # ğŸ† v61: Liquidity cap - prevents unrealistic backtest sizes
      - key: MAX_ABSOLUTE_POSITION_SIZE
        value: "100"
      # Auth - CHANGE THESE in Render dashboard!
      - key: AUTH_USERNAME
        value: bandito
      - key: AUTH_PASSWORD
        value: bandito
      # ğŸ† v70: REQUIRED FOR LIVE MODE - Set in Render dashboard
      # Without Redis, LIVE mode will be downgraded to PAPER for safety
      # - key: REDIS_URL
      #   value: "your-redis-url-here"
      # ğŸ† v70: Optional - Set if CLOB/Gamma requests are blocked by Cloudflare
      # - key: PROXY_URL
      #   value: "your-proxy-url-here"

